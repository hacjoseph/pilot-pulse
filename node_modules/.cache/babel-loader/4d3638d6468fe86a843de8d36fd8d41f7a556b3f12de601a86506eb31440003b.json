{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useParams,Link}from\"react-router-dom\";import\"../Assets/Css/PilotDashboard.css\";import axios from\"axios\";import Sidebar from\"../Components/Sidebar\";import{Line}from\"react-chartjs-2\";import html2canvas from\"html2canvas\";import jsPDF from\"jspdf\";import Modal from\"react-modal\";import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from\"chart.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const backeEndUrl='https://pilotpulse.pythonanywhere.com';const PilotDashboard=()=>{var _dashboardData$pilote,_dashboardData$heart_,_dashboardData$heart_2,_dashboardData$heart_3,_dashboardData$pilote2,_dashboardData$pilote3,_dashboardData$pilote4,_dashboardData$pilote5,_dashboardData$pilote6,_dashboardData$pilote7,_dashboardData$pilote8,_dashboardData$pilote9,_dashboardData$pilote10,_dashboardData$pilote11,_dashboardData$pilote12,_dashboardData$pilote13,_dashboardData$pilote14,_dashboardData$pilote15,_dashboardData$pilote16,_dashboardData$experi;const{id}=useParams();const[dashboardData,setDashboardData]=useState(null);const[isFullScreen,setIsFullScreen]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[hasFitbitAccount,setHasFitbitAccount]=useState(null);const pdfRef=useRef();useEffect(()=>{const fetchData=async()=>{try{var _data$pilote,_data$pilote2,_data$experimentation;const response=await axios.get(backeEndUrl+\"/api/pilotes/dashboard/\".concat(id,\"/\"));const data=response.data;setDashboardData(data);console.log(\"Données récupérées:\",data);console.log(\"Fitbit User ID:\",(_data$pilote=data.pilote)===null||_data$pilote===void 0?void 0:_data$pilote.fitbit_user);const fitbitUser=(_data$pilote2=data.pilote)===null||_data$pilote2===void 0?void 0:_data$pilote2.fitbit_user;const hasAccount=fitbitUser&&fitbitUser>0;setHasFitbitAccount(hasAccount);if(((_data$experimentation=data.experimentations)===null||_data$experimentation===void 0?void 0:_data$experimentation.length)>0){const lastExperimentId=data.experimentations[data.experimentations.length-1].id;setSelectedExperimentations(lastExperimentId);setSelectedExperimentPilots(data.experiment_members[lastExperimentId]||[]);}}catch(error){setError(\"Erreur lors de la récupération des données du dashboard\");console.error(\"Erreur lors de la récupération des données du dashboard:\",error);}finally{setLoading(false);}};fetchData();},[id]);const handleExperimentationCheckboxChange=(event,experimentationId)=>{const isChecked=event.target.checked;setSelectedExperimentations(isChecked?experimentationId:null);if(isChecked){setSelectedExperimentPilots(dashboardData.experiment_members[experimentationId]||[]);}else{setSelectedExperimentPilots([]);}};const[selectedExperimentId,setSelectedExperimentations]=useState(null);const[selectedExperimentPilots,setSelectedExperimentPilots]=useState([]);const supprimerFitbitAccount=async()=>{try{await axios.delete(backeEndUrl+\"/api/pilotes/fitbit/supprimer/\".concat(id,\"/\"));setHasFitbitAccount(false);}catch(error){console.error(\"Erreur lors de la suppression du compte Fitbit:\",error);}};const ajouterFitbitAccount=async()=>{try{const response=await axios.post(backeEndUrl+\"/api/pilotes/addfitbit/\".concat(id,\"/\"),{redirect_to:\"http://127.0.0.1:3000/pilote/\".concat(id,\"/\")});const authorizationUrl=response.data.authorization_url;if(authorizationUrl){window.location.href=authorizationUrl;}}catch(error){console.error(\"Erreur lors de l'ajout du compte Fitbit:\",error);}};const toggleFullScreen=()=>{setIsFullScreen(!isFullScreen);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Chargement...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}if(!dashboardData){return/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"Aucune donn\\xE9e disponible pour ce pilote.\"});}const photoUrl=backeEndUrl+\"/pilotes/\".concat((_dashboardData$pilote=dashboardData.pilote)===null||_dashboardData$pilote===void 0?void 0:_dashboardData$pilote.photo);const heart_rate_by_experimentation=dashboardData.heart_rate_by_experimentation;const datasets=Object.keys(heart_rate_by_experimentation).map((experimentId,index)=>{const experiment=heart_rate_by_experimentation[experimentId];return{label:\"Exp\\xE9rimentation \".concat(experimentId),data:experiment[\"data\"].map((y,idx)=>({x:experiment[\"labels\"][idx],y})),borderColor:\"rgba(\".concat(index*100,\", \").concat(150-index*30,\", 200, 1)\"),fill:false,tension:0.4};});const lineData={datasets:datasets.filter(dataset=>dataset.label===\"Exp\\xE9rimentation \".concat(selectedExperimentId))};const downloadPDF=()=>{const input=pdfRef.current;html2canvas(input).then(canvas=>{const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4',true);const pdfWidth=pdf.internal.pageSize.getWidth();const pdfHeight=pdf.internal.pageSize.getHeight();const imgWidth=canvas.width;const imgHeight=canvas.height;const ratio=Math.min(pdfWidth/imgWidth,pdfHeight/imgHeight);const imgX=(pdfWidth-imgWidth*ratio)/2;const imgY=30;pdf.addImage(imgData,'PNG',imgX,imgY,imgWidth*ratio,imgHeight*ratio);pdf.save('DashboardPilote.pdf');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"pilot-dashboard\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-glass\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-cubes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cube\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(UilMinusCircle,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"cube-label\",children:\"Minimum\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cube-value\",children:[((_dashboardData$heart_=dashboardData.heart_rate_by_experimentation[selectedExperimentId])===null||_dashboardData$heart_===void 0?void 0:_dashboardData$heart_.min)||'N/A',\" bpm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cube\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(UilPlusCircle,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"cube-label\",children:\"Maximum\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cube-value\",children:[((_dashboardData$heart_2=dashboardData.heart_rate_by_experimentation[selectedExperimentId])===null||_dashboardData$heart_2===void 0?void 0:_dashboardData$heart_2.max)||'N/A',\" bpm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cube\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(UilStopwatch,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"cube-label\",children:\"Moyenne\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cube-value\",children:[((_dashboardData$heart_3=dashboardData.heart_rate_by_experimentation[selectedExperimentId])===null||_dashboardData$heart_3===void 0?void 0:_dashboardData$heart_3.average)||'N/A',\" bpm\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cube\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:/*#__PURE__*/_jsx(UilAbacus,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"cube-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cube-value\",children:\" N/A \"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-exp\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pilot-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat((_dashboardData$pilote2=dashboardData.pilote)!==null&&_dashboardData$pilote2!==void 0&&_dashboardData$pilote2.photo?'photo-container':'empty-photo-container'),children:(_dashboardData$pilote3=dashboardData.pilote)!==null&&_dashboardData$pilote3!==void 0&&_dashboardData$pilote3.photo?/*#__PURE__*/_jsx(\"img\",{src:photoUrl,alt:\"Photo de \".concat(((_dashboardData$pilote4=dashboardData.pilote)===null||_dashboardData$pilote4===void 0?void 0:_dashboardData$pilote4.prenom)||'Inconnu'),className:\"pilot-photo\"}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-photo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nomprenomrole\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nomprenom\",children:/*#__PURE__*/_jsxs(\"p\",{children:[((_dashboardData$pilote5=dashboardData.pilote)===null||_dashboardData$pilote5===void 0?void 0:_dashboardData$pilote5.prenom)||'Inconnu',((_dashboardData$pilote6=dashboardData.pilote)===null||_dashboardData$pilote6===void 0?void 0:_dashboardData$pilote6.nom)||'Inconnu']})}),/*#__PURE__*/_jsx(\"div\",{className:\"rolepilote\",children:/*#__PURE__*/_jsx(\"p\",{children:((_dashboardData$pilote7=dashboardData.pilote)===null||_dashboardData$pilote7===void 0?void 0:_dashboardData$pilote7.role)||'Inconnu'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Pr\\xE9nom et Nom:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote8=dashboardData.pilote)===null||_dashboardData$pilote8===void 0?void 0:_dashboardData$pilote8.prenom)||'Inconnu'}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote9=dashboardData.pilote)===null||_dashboardData$pilote9===void 0?void 0:_dashboardData$pilote9.nom)||'Inconnu'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"R\\xF4le:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value-box\",children:/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote10=dashboardData.pilote)===null||_dashboardData$pilote10===void 0?void 0:_dashboardData$pilote10.role)||'Inconnu'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\xC2ge:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value-box\",children:/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote11=dashboardData.pilote)===null||_dashboardData$pilote11===void 0?void 0:_dashboardData$pilote11.age)||'Inconnu'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Sexe:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value-box\",children:/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote12=dashboardData.pilote)===null||_dashboardData$pilote12===void 0?void 0:_dashboardData$pilote12.sexe)||'Inconnu'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Experience:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value-box\",children:/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_dashboardData$pilote13=dashboardData.pilote)===null||_dashboardData$pilote13===void 0?void 0:_dashboardData$pilote13.experience)||'Inconnu'})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fitbit\",children:hasFitbitAccount?/*#__PURE__*/_jsx(\"button\",{className:\"Supfitbit\",onClick:supprimerFitbitAccount,children:\"Supprimer le compte\"}):/*#__PURE__*/_jsx(\"button\",{className:\"ajtfitbit\",onClick:ajouterFitbitAccount,children:\"Ajouter un compte\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-associee\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"graph-containerP\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-graph\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Fr\\xE9quence cardiaque au fil du temps\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleFullScreen,children:\"Graphique plein \\xE9cran\"})]}),selectedExperimentId&&/*#__PURE__*/_jsxs(\"div\",{ref:pdfRef,children:[/*#__PURE__*/_jsxs(Modal,{isOpen:isFullScreen,onRequestClose:toggleFullScreen,style:{content:{width:'90%',height:'100%',margin:'auto'}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-graph\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Fr\\xE9quence cardiaque au fil du temps\"}),/*#__PURE__*/_jsx(\"button\",{onClick:downloadPDF,children:\"Telechargement Pdf\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleFullScreen,children:\"Fermer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"experimentation-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Nom pilote:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",((_dashboardData$pilote14=dashboardData.pilote)===null||_dashboardData$pilote14===void 0?void 0:_dashboardData$pilote14.prenom)||'Inconnu',\"-\",((_dashboardData$pilote15=dashboardData.pilote)===null||_dashboardData$pilote15===void 0?void 0:_dashboardData$pilote15.nom)||'Inconnu']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Role:\"}),/*#__PURE__*/_jsx(\"p\",{children:((_dashboardData$pilote16=dashboardData.pilote)===null||_dashboardData$pilote16===void 0?void 0:_dashboardData$pilote16.role)||'Inconnu'})]})]}),datasets.length>0?/*#__PURE__*/_jsx(Line,{data:lineData}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune donn\\xE9e de fr\\xE9quence cardiaque disponible.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grapheP\",children:datasets.length>0?/*#__PURE__*/_jsx(Line,{data:lineData,options:{maintainAspectRatio:false}}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune donn\\xE9e \\xE0 afficher\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"experimentations-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"liste-exp\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Exp\\xE9rimentations associ\\xE9es\"}),((_dashboardData$experi=dashboardData.experimentations)===null||_dashboardData$experi===void 0?void 0:_dashboardData$experi.length)>0?/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Nom de l'exp\\xE9rimentation\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dashboardData.experimentations.map(experimentation=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedExperimentId===experimentation.id,onChange:event=>handleExperimentationCheckboxChange(event,experimentation.id)})}),/*#__PURE__*/_jsx(\"td\",{children:experimentation.nom}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/experimentation/\".concat(experimentation.id),children:/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",children:\"Consulter\"})})})]},experimentation.id))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune exp\\xE9rimentation associ\\xE9e\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"liste-pil\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pilotes associ\\xE9s\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedExperimentPilots.map((pilote,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:pilote[1]}),/*#__PURE__*/_jsx(\"td\",{children:pilote[2]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/pilote/\".concat(pilote[0]),children:/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",children:\"Consulter\"})})})]},index))})]})]})]})]})]})})]})]});};export default PilotDashboard;","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","Link","axios","Sidebar","Line","html2canvas","jsPDF","Modal","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","backeEndUrl","PilotDashboard","_dashboardData$pilote","_dashboardData$heart_","_dashboardData$heart_2","_dashboardData$heart_3","_dashboardData$pilote2","_dashboardData$pilote3","_dashboardData$pilote4","_dashboardData$pilote5","_dashboardData$pilote6","_dashboardData$pilote7","_dashboardData$pilote8","_dashboardData$pilote9","_dashboardData$pilote10","_dashboardData$pilote11","_dashboardData$pilote12","_dashboardData$pilote13","_dashboardData$pilote14","_dashboardData$pilote15","_dashboardData$pilote16","_dashboardData$experi","id","dashboardData","setDashboardData","isFullScreen","setIsFullScreen","loading","setLoading","error","setError","hasFitbitAccount","setHasFitbitAccount","pdfRef","fetchData","_data$pilote","_data$pilote2","_data$experimentation","response","get","concat","data","console","log","pilote","fitbit_user","fitbitUser","hasAccount","experimentations","length","lastExperimentId","setSelectedExperimentations","setSelectedExperimentPilots","experiment_members","handleExperimentationCheckboxChange","event","experimentationId","isChecked","target","checked","selectedExperimentId","selectedExperimentPilots","supprimerFitbitAccount","delete","ajouterFitbitAccount","post","redirect_to","authorizationUrl","authorization_url","window","location","href","toggleFullScreen","className","children","photoUrl","photo","heart_rate_by_experimentation","datasets","Object","keys","map","experimentId","index","experiment","label","y","idx","x","borderColor","fill","tension","lineData","filter","dataset","downloadPDF","input","current","then","canvas","imgData","toDataURL","pdf","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","imgWidth","width","imgHeight","height","ratio","Math","min","imgX","imgY","addImage","save","UilMinusCircle","UilPlusCircle","max","UilStopwatch","average","UilAbacus","src","alt","prenom","nom","role","age","sexe","experience","onClick","ref","isOpen","onRequestClose","style","content","margin","options","maintainAspectRatio","experimentation","type","onChange","to"],"sources":["C:/Users/houla/OneDrive/Bureau/2023-l3n2/deployement/pilot-pulse/src/Views/PilotDashboard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport \"../Assets/Css/PilotDashboard.css\";\r\nimport axios from \"axios\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport html2canvas from \"html2canvas\";\r\nimport jsPDF from \"jspdf\";\r\nimport Modal from \"react-modal\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst backeEndUrl = 'https://pilotpulse.pythonanywhere.com';\r\n\r\nconst PilotDashboard = () => {\r\n  const { id } = useParams();\r\n  const [dashboardData, setDashboardData] = useState(null);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [hasFitbitAccount, setHasFitbitAccount] = useState(null);\r\n  const pdfRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          backeEndUrl + `/api/pilotes/dashboard/${id}/`\r\n        );\r\n        const data = response.data;\r\n        setDashboardData(data);\r\n\r\n        console.log(\"Données récupérées:\", data);\r\n        console.log(\"Fitbit User ID:\", data.pilote?.fitbit_user);\r\n\r\n        const fitbitUser = data.pilote?.fitbit_user;\r\n        const hasAccount = fitbitUser && fitbitUser > 0;\r\n        setHasFitbitAccount(hasAccount);\r\n        if (data.experimentations?.length > 0) {\r\n          const lastExperimentId = data.experimentations[data.experimentations.length - 1].id;\r\n          setSelectedExperimentations(lastExperimentId);\r\n          setSelectedExperimentPilots(data.experiment_members[lastExperimentId] || []);\r\n        }\r\n      } catch (error) {\r\n        setError(\"Erreur lors de la récupération des données du dashboard\");\r\n        console.error(\r\n          \"Erreur lors de la récupération des données du dashboard:\",\r\n          error\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [id]);\r\n\r\n  const handleExperimentationCheckboxChange = (event, experimentationId) => {\r\n    const isChecked = event.target.checked;\r\n    setSelectedExperimentations(isChecked ? experimentationId : null);\r\n    \r\n    if (isChecked) {\r\n      setSelectedExperimentPilots(dashboardData.experiment_members[experimentationId] || []);\r\n    } else {\r\n      setSelectedExperimentPilots([]);\r\n    }\r\n  };  \r\n\r\n  const [selectedExperimentId, setSelectedExperimentations] = useState(null);\r\n  const [selectedExperimentPilots, setSelectedExperimentPilots] = useState([]);\r\n\r\n  const supprimerFitbitAccount = async () => {\r\n    try {\r\n      await axios.delete(backeEndUrl + `/api/pilotes/fitbit/supprimer/${id}/`);\r\n      setHasFitbitAccount(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la suppression du compte Fitbit:\", error);\r\n    }\r\n  };\r\n\r\n  const ajouterFitbitAccount = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        backeEndUrl + `/api/pilotes/addfitbit/${id}/`,\r\n        {\r\n          redirect_to: `http://127.0.0.1:3000/pilote/${id}/`,\r\n        }\r\n      );\r\n      const authorizationUrl = response.data.authorization_url;\r\n      if (authorizationUrl) {\r\n        window.location.href = authorizationUrl;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de l'ajout du compte Fitbit:\", error);\r\n    }\r\n  };\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Chargement...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">{error}</div>;\r\n  }\r\n\r\n  if (!dashboardData) {\r\n    return (\r\n      <div className=\"no-data\">Aucune donnée disponible pour ce pilote.</div>\r\n    );\r\n  }\r\n\r\n  const photoUrl = backeEndUrl + `/pilotes/${dashboardData.pilote?.photo}`;\r\n\r\n  const heart_rate_by_experimentation = dashboardData.heart_rate_by_experimentation;\r\n  const datasets = Object.keys(heart_rate_by_experimentation).map((experimentId, index) => {\r\n    const experiment = heart_rate_by_experimentation[experimentId];\r\n        return {\r\n          label: `Expérimentation ${experimentId}`,\r\n          data: experiment[\"data\"].map((y, idx) => ({\r\n            x: experiment[\"labels\"][idx],\r\n            y,\r\n          })),\r\n          borderColor: `rgba(${index * 100}, ${150 - index * 30}, 200, 1)`,\r\n          fill: false,\r\n          tension: 0.4,\r\n        };\r\n      });\r\n\r\n  const lineData = {\r\n    datasets: datasets.filter(dataset => dataset.label === `Expérimentation ${selectedExperimentId}`), \r\n  };\r\n\r\n  const downloadPDF = () => {\r\n    const input = pdfRef.current;\r\n    html2canvas(input).then((canvas) => {\r\n      const imgData = canvas.toDataURL('image/png');\r\n      const pdf = new jsPDF('p','mm','a4', true);\r\n      const pdfWidth = pdf.internal.pageSize.getWidth();\r\n      const pdfHeight = pdf.internal.pageSize.getHeight();\r\n      const imgWidth = canvas.width;\r\n      const imgHeight = canvas.height;\r\n      const ratio = Math.min(pdfWidth/ imgWidth, pdfHeight/imgHeight);\r\n      const imgX = (pdfWidth - imgWidth * ratio)/2;\r\n      const imgY = 30;\r\n      pdf.addImage(imgData, 'PNG', imgX, imgY, imgWidth*ratio, imgHeight*ratio);\r\n      pdf.save('DashboardPilote.pdf');\r\n    }); \r\n  };\r\n\r\n  return (\r\n    <div className=\"pilot-dashboard\">\r\n      <Sidebar />\r\n      <div className=\"dashboard-glass\">\r\n        <div className=\"data-cubes\">\r\n              <div className=\"cube\">\r\n                <div className='icon'> \r\n                  <UilMinusCircle/>\r\n                </div>\r\n                <div>\r\n                  <span className=\"cube-label\">Minimum</span>\r\n                  <span className=\"cube-value\">{dashboardData.heart_rate_by_experimentation[selectedExperimentId]?.min || 'N/A'} bpm</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"cube\">\r\n                  <div className='icon'> \r\n                    <UilPlusCircle/>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"cube-label\">Maximum</span>\r\n                    <span className=\"cube-value\">{dashboardData.heart_rate_by_experimentation[selectedExperimentId]?.max || 'N/A'} bpm</span>\r\n                  </div>\r\n              </div>\r\n              <div className=\"cube\">\r\n                <div className='icon'>\r\n                  <UilStopwatch/>\r\n                </div>\r\n                <div>\r\n                  <span className=\"cube-label\">Moyenne</span>\r\n                  <span className=\"cube-value\">{dashboardData.heart_rate_by_experimentation[selectedExperimentId]?.average || 'N/A'} bpm</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"cube\">\r\n                <div className='icon'>\r\n                  <UilAbacus/>\r\n                </div>\r\n                <div>\r\n                  <span className=\"cube-label\">Nombre</span>\r\n                  <span className=\"cube-value\"> N/A </span>\r\n                </div>\r\n              </div>\r\n          </div>\r\n\r\n\r\n          <div className=\"dashboard-content\">\r\n            <div className=\"info-exp\">\r\n              <div className=\"pilot-info\">\r\n\r\n                <div className={`${dashboardData.pilote?.photo ? 'photo-container' : 'empty-photo-container'}`}> \r\n                  {dashboardData.pilote?.photo ? (\r\n                    \r\n                    <img \r\n                      src={photoUrl} \r\n                      alt={`Photo de ${dashboardData.pilote?.prenom || 'Inconnu'}`} \r\n                      className=\"pilot-photo\" \r\n                    />\r\n                  ) : (\r\n                    <div className=\"empty-photo\" />\r\n                  )}\r\n                </div>\r\n\r\n                <div className='nomprenomrole'>\r\n                  <div className='nomprenom'>\r\n                    <p> \r\n                      {dashboardData.pilote?.prenom || 'Inconnu'}    \r\n                      {dashboardData.pilote?.nom || 'Inconnu'}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className='rolepilote'>\r\n                    <p>\r\n                    {dashboardData.pilote?.role || 'Inconnu'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"info-grid\">\r\n                  <div className=\"info-box\">\r\n                    <span className=\"label\">Prénom et Nom:</span>\r\n                    <div className=\"value-box\">\r\n                      <span className=\"value\">{dashboardData.pilote?.prenom || 'Inconnu'}</span>\r\n                      <span className=\"value\">{dashboardData.pilote?.nom || 'Inconnu'}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"info-box\">\r\n                    <span className=\"label\">Rôle:</span>\r\n                    <div className=\"value-box\">\r\n                      <span className=\"value\">{dashboardData.pilote?.role || 'Inconnu'}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"info-box\">\r\n                    <span className=\"label\">Âge:</span>\r\n                    <div className=\"value-box\">\r\n                      <span className=\"value\">{dashboardData.pilote?.age || 'Inconnu'}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"info-box\">\r\n                    <span className=\"label\">Sexe:</span>\r\n                    <div className=\"value-box\">\r\n                      <span className=\"value\">{dashboardData.pilote?.sexe || 'Inconnu'}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"info-box\">\r\n                    <span className=\"label\">Experience:</span>\r\n                    <div className=\"value-box\">\r\n                      <span className=\"value\">{dashboardData.pilote?.experience || 'Inconnu'}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='fitbit'>\r\n                  {hasFitbitAccount ? (\r\n                    <button className='Supfitbit' onClick={supprimerFitbitAccount}>\r\n                      Supprimer le compte\r\n                    </button>\r\n                  ) : (\r\n                    <button \r\n                      className='ajtfitbit' onClick={ajouterFitbitAccount}>\r\n                      Ajouter un compte\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n              </div>\r\n              <div className='info-associee'>\r\n                <div className=\"graph-containerP\">\r\n                  <div className='info-graph'>\r\n                    <h2>Fréquence cardiaque au fil du temps</h2>\r\n                    <button onClick={toggleFullScreen}>Graphique plein écran</button>\r\n                  </div>\r\n                  {selectedExperimentId && (\r\n                  <div ref={pdfRef}>\r\n\r\n                      <Modal\r\n                        isOpen={isFullScreen}\r\n                        onRequestClose={toggleFullScreen}\r\n                        style={{\r\n                          content: {\r\n                            width: '90%', \r\n                            height: '100%', \r\n                            margin: 'auto', \r\n                          },\r\n                        }}\r\n                      >\r\n                    \r\n                          <div className='info-graph'>\r\n                            <h2>Fréquence cardiaque au fil du temps</h2>\r\n                            <button onClick={downloadPDF}>Telechargement Pdf</button>\r\n                            <button onClick={toggleFullScreen}>Fermer</button>\r\n                          </div>\r\n\r\n                          <div className=\"experimentation-info\">          \r\n                              <div>\r\n                                <h4>Nom pilote:</h4>\r\n                                <p> {dashboardData.pilote?.prenom || 'Inconnu'}-{dashboardData.pilote?.nom || 'Inconnu'}</p>\r\n                              </div> \r\n                              <div>\r\n                                <h4>Role:</h4>\r\n                                <p>{dashboardData.pilote?.role || 'Inconnu'}</p>\r\n                              </div>                       \r\n                          </div>\r\n                          \r\n                          {datasets.length > 0 ? (\r\n                            <Line data={lineData} />\r\n                          ) : (\r\n                            <p>Aucune donnée de fréquence cardiaque disponible.</p>\r\n                          )}\r\n                      \r\n\r\n                      </Modal>\r\n\r\n                      <div className='grapheP'>\r\n                        {datasets.length > 0 ? (\r\n                          <Line data={lineData} options={{ maintainAspectRatio: false }} />\r\n                          \r\n                        ) : (\r\n                          <p>Aucune donnée à afficher</p>\r\n                        )}\r\n                      </div>\r\n  \r\n                  </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"experimentations-table\">\r\n                    <div className=\"liste-exp\">\r\n                    <h2>Expérimentations associées</h2>\r\n                    {dashboardData.experimentations?.length > 0 ? (\r\n                      <table style={{ width: '100%' }}>\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th>Nom de l'expérimentation</th>\r\n                            <th>Action</th> \r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {dashboardData.experimentations.map((experimentation) => (\r\n                          <tr key={experimentation.id}>\r\n                            <td>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectedExperimentId === experimentation.id}\r\n                              onChange={(event) => handleExperimentationCheckboxChange(event, experimentation.id)}\r\n                            />\r\n                                \r\n                            </td>\r\n                            <td>{experimentation.nom}</td>\r\n                            <td>\r\n                              <Link to={`/experimentation/${experimentation.id}`}>\r\n                                <button className=\"view-button\">Consulter</button>\r\n                              </Link>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        </tbody>\r\n                      </table>\r\n                    ) : (\r\n                      <p>Aucune expérimentation associée</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"liste-pil\">\r\n                  <h2>Pilotes associés</h2>\r\n                  <table style={{ width: \"100%\" }}>\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Nom</th>\r\n                        <th>Prénom</th>\r\n                        <th>Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {selectedExperimentPilots.map((pilote, index) => (\r\n                        <tr key={index}>\r\n                          <td>{pilote[1]}</td>\r\n                          <td>{pilote[2]}</td>\r\n                          <td>\r\n                          <Link to={`/pilote/${pilote[0]}`}>\r\n                            <button className=\"view-button\">Consulter</button>\r\n                          </Link>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default PilotDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}