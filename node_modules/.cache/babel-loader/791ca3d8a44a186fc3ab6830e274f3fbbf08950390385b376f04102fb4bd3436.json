{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Sidebar from\"../Components/Sidebar\";import CreateExperimentModal from\"../modals/CreateExperimentModal\";import AjouterPiloteModal from\"../modals/AddPilotExperimentModal\";import Modal from'react-modal';import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const backeEndUrl='https://pilotpulse.pythonanywhere.com';function ExperimentsPage(){const[isModalOpen,setIsModalOpen]=useState(false);const[isAjouterPiloteModalOpen,setIsAjouterPiloteModalOpen]=useState(false);const[currentExperimentationId,setCurrentExperimentationId]=useState(null);const[data,setData]=useState([]);const[deleteConfirmationModalOpen,setDeleteConfirmationModalOpen]=useState(false);const[experimentationToDelete,setExperimentationToDelete]=useState(null);const openModal=()=>{setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);};const openAjouterPiloteModal=experimentationId=>{setCurrentExperimentationId(experimentationId);setIsAjouterPiloteModalOpen(true);};const closeAjouterPiloteModal=()=>{setIsAjouterPiloteModalOpen(false);setCurrentExperimentationId(null);};const getData=()=>{axios.get(backeEndUrl+\"/api/experimentations/\").then(response=>{setData(response.data);});};const deleteData=()=>{axios.delete(backeEndUrl+\"/api/experimentations/supprimer/\".concat(experimentationToDelete,\"/\")).then(()=>{const result=data.filter(item=>item.id!==experimentationToDelete);setData(result);setDeleteConfirmationModalOpen(false);}).catch(error=>{console.error('Erreur lors de la suppression de l\\'expérimentation:',error);setDeleteConfirmationModalOpen(false);});};useEffect(()=>{getData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"experiments-page\",children:[/*#__PURE__*/_jsx(Sidebar,{activePage:\"experimentation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"experimentsGlass\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"experiments-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Liste des Exp\\xE9rimentations\",/*#__PURE__*/_jsx(\"button\",{className:\"create-experiment-button\",onClick:openModal,children:\"Cr\\xE9er une Exp\\xE9rimentation\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"experiments-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Temps D\\xE9but\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Temps Fin\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.nom}),/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.date}),/*#__PURE__*/_jsx(\"td\",{children:item.temps_debut}),/*#__PURE__*/_jsx(\"td\",{children:item.temps_fin}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>{setExperimentationToDelete(item.id);setDeleteConfirmationModalOpen(true);},children:\"Supprimer\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modify-button\",onClick:()=>openAjouterPiloteModal(item.id),children:\"Ajouter Pilote\"}),/*#__PURE__*/_jsx(Link,{to:\"/experimentation/\".concat(item.id),children:/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",children:\"Consulter\"})})]})]},item.id))})]})]})}),/*#__PURE__*/_jsx(CreateExperimentModal,{isOpen:isModalOpen,closeModal:closeModal}),/*#__PURE__*/_jsx(AjouterPiloteModal,{isOpen:isAjouterPiloteModalOpen,experimentationId:currentExperimentationId,closeModal:closeAjouterPiloteModal}),/*#__PURE__*/_jsxs(Modal,{isOpen:deleteConfirmationModalOpen,onRequestClose:()=>setDeleteConfirmationModalOpen(false),contentLabel:\"Confirmation de suppression\",style:{overlay:{backgroundColor:'rgba(0, 0, 0, 0.5)'},content:{width:'400px',margin:'auto',borderRadius:'8px',padding:'20px',height:'150px'}},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirmer la suppression de l'exp\\xE9rimentation?\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",onClick:()=>setDeleteConfirmationModalOpen(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:deleteData,children:\"Confirmer\"})]})]})]});}export default ExperimentsPage;","map":{"version":3,"names":["React","useState","useEffect","Link","Sidebar","CreateExperimentModal","AjouterPiloteModal","Modal","axios","jsx","_jsx","jsxs","_jsxs","backeEndUrl","ExperimentsPage","isModalOpen","setIsModalOpen","isAjouterPiloteModalOpen","setIsAjouterPiloteModalOpen","currentExperimentationId","setCurrentExperimentationId","data","setData","deleteConfirmationModalOpen","setDeleteConfirmationModalOpen","experimentationToDelete","setExperimentationToDelete","openModal","closeModal","openAjouterPiloteModal","experimentationId","closeAjouterPiloteModal","getData","get","then","response","deleteData","delete","concat","result","filter","item","id","catch","error","console","className","children","activePage","onClick","map","nom","date","temps_debut","temps_fin","to","isOpen","onRequestClose","contentLabel","style","overlay","backgroundColor","content","width","margin","borderRadius","padding","height","display","justifyContent","marginTop"],"sources":["C:/Users/houla/OneDrive/Bureau/2023-l3n2/deployement/pilot-pulse/src/Views/ExperimentsPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport CreateExperimentModal from \"../modals/CreateExperimentModal\";\r\nimport AjouterPiloteModal from \"../modals/AddPilotExperimentModal\";\r\nimport Modal from 'react-modal';\r\nimport axios from \"axios\";\r\n\r\nconst backeEndUrl = 'https://pilotpulse.pythonanywhere.com';\r\n\r\nfunction ExperimentsPage() {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isAjouterPiloteModalOpen, setIsAjouterPiloteModalOpen] =\r\n    useState(false);\r\n  const [currentExperimentationId, setCurrentExperimentationId] =\r\n    useState(null);\r\n  const [data, setData] = useState([]);\r\n  const [deleteConfirmationModalOpen, setDeleteConfirmationModalOpen] = useState(false);\r\n  const [experimentationToDelete, setExperimentationToDelete] = useState(null);\r\n\r\n  const openModal = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const openAjouterPiloteModal = (experimentationId) => {\r\n    setCurrentExperimentationId(experimentationId);\r\n    setIsAjouterPiloteModalOpen(true);\r\n  };\r\n\r\n  const closeAjouterPiloteModal = () => {\r\n    setIsAjouterPiloteModalOpen(false);\r\n    setCurrentExperimentationId(null);\r\n  };\r\n\r\n  const getData = () => {\r\n    axios.get(backeEndUrl + \"/api/experimentations/\").then((response) => {\r\n      setData(response.data);\r\n    });\r\n  };\r\n\r\n  const deleteData = () => {\r\n    axios.delete(backeEndUrl + `/api/experimentations/supprimer/${experimentationToDelete}/`).then(() => {\r\n      const result = data.filter((item) => item.id !== experimentationToDelete);\r\n      setData(result);\r\n      setDeleteConfirmationModalOpen(false);\r\n    }).catch((error) => {\r\n      console.error('Erreur lors de la suppression de l\\'expérimentation:', error);\r\n      setDeleteConfirmationModalOpen(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"experiments-page\">\r\n      <Sidebar activePage=\"experimentation\" />\r\n      <div className=\"experimentsGlass\">\r\n        <div className=\"experiments-content\">\r\n          <h2>\r\n            Liste des Expérimentations\r\n            <button className=\"create-experiment-button\" onClick={openModal}>\r\n              Créer une Expérimentation\r\n            </button>\r\n          </h2>\r\n\r\n          <table className=\"experiments-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nom</th>\r\n                <th>ID</th>\r\n                <th>Date</th>\r\n                <th>Temps Début</th>\r\n                <th>Temps Fin</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {data.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>{item.nom}</td>\r\n                  <td>{item.id}</td>\r\n                  <td>{item.date}</td>\r\n                  <td>{item.temps_debut}</td>\r\n                  <td>{item.temps_fin}</td>\r\n                  <td>\r\n                    <button\r\n                      className=\"delete-button\"\r\n                      onClick={() => {\r\n                        setExperimentationToDelete(item.id);\r\n                        setDeleteConfirmationModalOpen(true);\r\n                      }}\r\n                    >\r\n                      Supprimer\r\n                    </button>\r\n                    <button\r\n                      className=\"modify-button\"\r\n                      onClick={() => openAjouterPiloteModal(item.id)}\r\n                    >\r\n                      Ajouter Pilote\r\n                    </button>\r\n                    <Link to={`/experimentation/${item.id}`}>\r\n                      <button className=\"view-button\">Consulter</button>\r\n                    </Link>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <CreateExperimentModal isOpen={isModalOpen} closeModal={closeModal} />\r\n\r\n      <AjouterPiloteModal\r\n        isOpen={isAjouterPiloteModalOpen}\r\n        experimentationId={currentExperimentationId}\r\n        closeModal={closeAjouterPiloteModal}\r\n      />\r\n\r\n      <Modal\r\n          isOpen={deleteConfirmationModalOpen}\r\n          onRequestClose={() => setDeleteConfirmationModalOpen(false)}\r\n          contentLabel=\"Confirmation de suppression\"\r\n          style={{\r\n            overlay: {\r\n              backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            },\r\n            content: {\r\n              width: '400px',\r\n              margin: 'auto',\r\n              borderRadius: '8px',\r\n              padding: '20px',\r\n              height: '150px',\r\n            },\r\n          }}\r\n      >\r\n          <h2>Confirmer la suppression de l'expérimentation?</h2>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>\r\n            <button className=\"view-button\" onClick={() => setDeleteConfirmationModalOpen(false)}>Annuler</button>\r\n            <button className=\"delete-button\" onClick={deleteData}>Confirmer</button>\r\n          </div>\r\n\r\n        </Modal>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ExperimentsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}