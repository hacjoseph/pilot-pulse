{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Sidebar from\"../Components/Sidebar\";import CreatePilotModal from\"../modals/CreatePilotModal\";import ModifyPilotModal from\"../modals/ModifyPilotModal\";import Modal from\"react-modal\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const backeEndUrl='https://pilotpulse.pythonanywhere.com';Modal.setAppElement(\"#root\");function PilotsPage(){const[isModalOpen,setIsModalOpen]=useState(false);const[data,setData]=useState([]);const[isModifyModalOpen,setIsModifyModalOpen]=useState(false);const[selectedPilotId,setSelectedPilotId]=useState(null);const[deleteConfirmationModalOpen,setDeleteConfirmationModalOpen]=useState(false);const[pilotToDelete,setPilotToDelete]=useState(null);const openModal=()=>{setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);};const openModifyModal=pilotId=>{setSelectedPilotId(pilotId);setIsModifyModalOpen(true);};const closeModifyModal=()=>{setIsModifyModalOpen(false);};const getData=()=>{axios.get(backeEndUrl+\"/api/pilotes/\").then(data=>{console.log(\"pilotes\",data);setData(data.data);});};const deleteData=()=>{axios.delete(backeEndUrl+\"/api/pilotes/delete/\".concat(pilotToDelete,\"/\")).then(()=>{const updatedData=data.filter(item=>item.id!==pilotToDelete);setData(updatedData);setDeleteConfirmationModalOpen(false);}).catch(error=>{console.error('Erreur lors de la suppression du pilote:',error);setDeleteConfirmationModalOpen(false);});};useEffect(()=>{getData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pilots-page\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"pilotsGlass\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pilots-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Liste des Pilotes\",/*#__PURE__*/_jsx(\"button\",{onClick:openModal,className:\"create-pilot-button\",children:\"Ajouter un Pilote\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"pilots-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Photo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nom et Prenom\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Experience\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sexe\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.photo,alt:\"Pilot\",className:\"pilot-image\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[item.nom,\" \",item.prenom]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.role,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.age,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.experience,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.sexe,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>{setPilotToDelete(item.id);setDeleteConfirmationModalOpen(true);},children:\"Supprimer\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modify-button\",onClick:()=>openModifyModal(item.id),children:\"Modifier\"}),/*#__PURE__*/_jsx(Link,{to:\"/pilote/\".concat(item.id),children:/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",children:\"Consulter\"})})]})]},item.id))})]})]})}),/*#__PURE__*/_jsx(CreatePilotModal,{isOpen:isModalOpen,closeModal:closeModal}),/*#__PURE__*/_jsx(ModifyPilotModal,{isOpen:isModifyModalOpen,closeModal:closeModifyModal,piloteId:selectedPilotId,refreshData:getData}),/*#__PURE__*/_jsxs(Modal,{isOpen:deleteConfirmationModalOpen,onRequestClose:()=>setDeleteConfirmationModalOpen(false),contentLabel:\"Confirmation de suppression\",style:{overlay:{backgroundColor:'rgba(0, 0, 0, 0.5)'},content:{width:'400px',margin:'auto',borderRadius:'8px',padding:'20px',height:'150px'}},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirmer la suppression du pilote?\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",onClick:()=>setDeleteConfirmationModalOpen(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:deleteData,children:\"Confirmer\"})]})]})]});}export default PilotsPage;","map":{"version":3,"names":["React","useState","useEffect","Link","Sidebar","CreatePilotModal","ModifyPilotModal","Modal","axios","jsx","_jsx","jsxs","_jsxs","backeEndUrl","setAppElement","PilotsPage","isModalOpen","setIsModalOpen","data","setData","isModifyModalOpen","setIsModifyModalOpen","selectedPilotId","setSelectedPilotId","deleteConfirmationModalOpen","setDeleteConfirmationModalOpen","pilotToDelete","setPilotToDelete","openModal","closeModal","openModifyModal","pilotId","closeModifyModal","getData","get","then","console","log","deleteData","delete","concat","updatedData","filter","item","id","catch","error","className","children","onClick","map","src","photo","alt","nom","prenom","role","age","experience","sexe","to","isOpen","piloteId","refreshData","onRequestClose","contentLabel","style","overlay","backgroundColor","content","width","margin","borderRadius","padding","height","display","justifyContent","marginTop"],"sources":["C:/Users/houla/OneDrive/Bureau/2023-l3n2/deployement/pilot-pulse/src/Views/PilotsPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport CreatePilotModal from \"../modals/CreatePilotModal\";\r\nimport ModifyPilotModal from \"../modals/ModifyPilotModal\";\r\nimport Modal from \"react-modal\";\r\nimport axios from \"axios\";\r\n\r\nconst backeEndUrl = 'https://pilotpulse.pythonanywhere.com';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nfunction PilotsPage() {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const [isModifyModalOpen, setIsModifyModalOpen] = useState(false);\r\n  const [selectedPilotId, setSelectedPilotId] = useState(null);\r\n  const [deleteConfirmationModalOpen, setDeleteConfirmationModalOpen] = useState(false);\r\n  const [pilotToDelete, setPilotToDelete] = useState(null);\r\n\r\n  const openModal = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const openModifyModal = (pilotId) => {\r\n    setSelectedPilotId(pilotId);\r\n    setIsModifyModalOpen(true);\r\n  };\r\n\r\n  const closeModifyModal = () => {\r\n    setIsModifyModalOpen(false);\r\n  };\r\n\r\n  const getData = () => {\r\n    axios.get(backeEndUrl + \"/api/pilotes/\").then((data) => {\r\n      console.log(\"pilotes\", data);\r\n      setData(data.data);\r\n    });\r\n  };\r\n\r\n  const deleteData = () => {\r\n    axios.delete(backeEndUrl + `/api/pilotes/delete/${pilotToDelete}/`).then(() => {\r\n      const updatedData = data.filter((item) => item.id !== pilotToDelete);\r\n      setData(updatedData);\r\n      setDeleteConfirmationModalOpen(false);\r\n    }).catch((error) => {\r\n      console.error('Erreur lors de la suppression du pilote:', error);\r\n      setDeleteConfirmationModalOpen(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"pilots-page\">\r\n      <Sidebar />\r\n      <div className=\"pilotsGlass\">\r\n        <div className=\"pilots-content\">\r\n          <h2>\r\n            Liste des Pilotes\r\n            <button onClick={openModal} className=\"create-pilot-button\">\r\n              Ajouter un Pilote\r\n            </button>\r\n          </h2>\r\n\r\n          <table className=\"pilots-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Photo</th>\r\n                <th>Nom et Prenom</th>\r\n                <th>Role</th>\r\n                <th>Age</th>\r\n                <th>Experience</th>\r\n                <th>Sexe</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n              <tbody>\r\n                {data.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td><img src={item.photo} alt=\"Pilot\" className=\"pilot-image\" /></td>\r\n                    <td>{item.nom} {item.prenom}</td>\r\n                    <td>{item.role} </td>\r\n                    <td>{item.age} </td>\r\n                    <td>{item.experience} </td>\r\n                    <td>{item.sexe} </td>\r\n                    <td>\r\n                      <button className=\"delete-button\" onClick={() => {\r\n                      setPilotToDelete(item.id);\r\n                      setDeleteConfirmationModalOpen(true);\r\n                    }}>Supprimer</button>\r\n                      <button className=\"modify-button\" onClick={() => openModifyModal(item.id)}>Modifier</button>\r\n                      <Link to={`/pilote/${item.id}`}>\r\n                        <button className=\"view-button\">Consulter</button>\r\n                      </Link>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <CreatePilotModal isOpen={isModalOpen} closeModal={closeModal} />\r\n      <ModifyPilotModal\r\n        isOpen={isModifyModalOpen}\r\n        closeModal={closeModifyModal}\r\n        piloteId={selectedPilotId}\r\n        refreshData={getData}\r\n      />\r\n      \r\n      <Modal\r\n        isOpen={deleteConfirmationModalOpen}\r\n        onRequestClose={() => setDeleteConfirmationModalOpen(false)}\r\n        contentLabel=\"Confirmation de suppression\"\r\n        style={{\r\n          overlay: {\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          },\r\n          content: {\r\n            width: '400px',\r\n            margin: 'auto',\r\n            borderRadius: '8px',\r\n            padding: '20px', \r\n            height: '150px',\r\n          },\r\n        }}\r\n      >\r\n        <h2>Confirmer la suppression du pilote?</h2>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '15px' }}>\r\n          <button className=\"view-button\" onClick={() => setDeleteConfirmationModalOpen(false)}>Annuler</button>\r\n          <button className=\"delete-button\" onClick={deleteData}>Confirmer</button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\nexport default PilotsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}