{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Sidebar from\"../Components/Sidebar\";import CreatePilotModal from\"../modals/CreatePilotModal\";import ModifyPilotModal from\"../modals/ModifyPilotModal\";import Modal from\"react-modal\";import axios from\"axios\";import{backeEndUrl}from\"../App.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";Modal.setAppElement(\"#root\");function PilotsPage(){const[isModalOpen,setIsModalOpen]=useState(false);const[data,setData]=useState([]);const[isModifyModalOpen,setIsModifyModalOpen]=useState(false);const[selectedPilotId,setSelectedPilotId]=useState(null);const openModal=()=>{setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);};const openModifyModal=pilotId=>{setSelectedPilotId(pilotId);setIsModifyModalOpen(true);};const closeModifyModal=()=>{setIsModifyModalOpen(false);};const getData=()=>{axios.get(backeEndUrl+\"/api/pilotes/\").then(data=>{console.log(\"pilotes\",data);setData(data.data);});};const deleteData=id=>{const confirmation=window.confirm(\"Voulez-vous vraiment supprimer cet Pilote ?\");if(confirmation){axios.delete(backeEndUrl+\"/api/pilotes/delete/\".concat(id,\"/\")).then(()=>{const updatedData=data.filter(item=>item.id!==id);setData(updatedData);}).catch(error=>{console.error(\"Erreur lors de la suppression du pilote:\",error);});}};useEffect(()=>{getData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pilots-page\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"pilotsGlass\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pilots-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Liste des Pilotes\",/*#__PURE__*/_jsx(\"button\",{onClick:openModal,className:\"create-pilot-button\",children:\"Ajouter un Pilote\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"pilots-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Photo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nom et Prenom\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Experience\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sexe\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.photo,alt:\"Pilot\",className:\"pilot-image\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[item.nom,\" \",item.prenom]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.role,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.age,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.experience,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.sexe,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>deleteData(item.id),children:\"Supprimer\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modify-button\",onClick:()=>openModifyModal(item.id),children:\"Modifier\"}),/*#__PURE__*/_jsx(Link,{to:\"/pilote/\".concat(item.id),children:/*#__PURE__*/_jsx(\"button\",{className:\"view-button\",children:\"Consulter\"})})]})]},item.id))})]})]})}),/*#__PURE__*/_jsx(CreatePilotModal,{isOpen:isModalOpen,closeModal:closeModal}),/*#__PURE__*/_jsx(ModifyPilotModal,{isOpen:isModifyModalOpen,closeModal:closeModifyModal,piloteId:selectedPilotId,refreshData:getData})]});}export default PilotsPage;","map":{"version":3,"names":["React","useState","useEffect","Link","Sidebar","CreatePilotModal","ModifyPilotModal","Modal","axios","backeEndUrl","jsx","_jsx","jsxs","_jsxs","setAppElement","PilotsPage","isModalOpen","setIsModalOpen","data","setData","isModifyModalOpen","setIsModifyModalOpen","selectedPilotId","setSelectedPilotId","openModal","closeModal","openModifyModal","pilotId","closeModifyModal","getData","get","then","console","log","deleteData","id","confirmation","window","confirm","delete","concat","updatedData","filter","item","catch","error","className","children","onClick","map","src","photo","alt","nom","prenom","role","age","experience","sexe","to","isOpen","piloteId","refreshData"],"sources":["C:/Users/houla/OneDrive/Bureau/2023-l3n2/deployement/pilot-pulse/src/Views/PilotsPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Sidebar from \"../Components/Sidebar\";\r\nimport CreatePilotModal from \"../modals/CreatePilotModal\";\r\nimport ModifyPilotModal from \"../modals/ModifyPilotModal\";\r\nimport Modal from \"react-modal\";\r\nimport axios from \"axios\";\r\nimport { backeEndUrl } from \"../App.js\";\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nfunction PilotsPage() {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const [isModifyModalOpen, setIsModifyModalOpen] = useState(false);\r\n  const [selectedPilotId, setSelectedPilotId] = useState(null);\r\n\r\n  const openModal = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const openModifyModal = (pilotId) => {\r\n    setSelectedPilotId(pilotId);\r\n    setIsModifyModalOpen(true);\r\n  };\r\n\r\n  const closeModifyModal = () => {\r\n    setIsModifyModalOpen(false);\r\n  };\r\n\r\n  const getData = () => {\r\n    axios.get(backeEndUrl + \"/api/pilotes/\").then((data) => {\r\n      console.log(\"pilotes\", data);\r\n      setData(data.data);\r\n    });\r\n  };\r\n  const deleteData = (id) => {\r\n    const confirmation = window.confirm(\r\n      \"Voulez-vous vraiment supprimer cet Pilote ?\"\r\n    );\r\n    if (confirmation) {\r\n      axios\r\n        .delete(backeEndUrl + `/api/pilotes/delete/${id}/`)\r\n        .then(() => {\r\n          const updatedData = data.filter((item) => item.id !== id);\r\n          setData(updatedData);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Erreur lors de la suppression du pilote:\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"pilots-page\">\r\n      <Sidebar />\r\n      <div className=\"pilotsGlass\">\r\n        <div className=\"pilots-content\">\r\n          <h2>\r\n            Liste des Pilotes\r\n            <button onClick={openModal} className=\"create-pilot-button\">\r\n              Ajouter un Pilote\r\n            </button>\r\n          </h2>\r\n\r\n          <table className=\"pilots-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Photo</th>\r\n                <th>Nom et Prenom</th>\r\n                <th>Role</th>\r\n                <th>Age</th>\r\n                <th>Experience</th>\r\n                <th>Sexe</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {data.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    <img src={item.photo} alt=\"Pilot\" className=\"pilot-image\" />\r\n                  </td>\r\n                  <td>\r\n                    {item.nom} {item.prenom}\r\n                  </td>\r\n                  <td>{item.role} </td>\r\n                  <td>{item.age} </td>\r\n                  <td>{item.experience} </td>\r\n                  <td>{item.sexe} </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"delete-button\"\r\n                      onClick={() => deleteData(item.id)}\r\n                    >\r\n                      Supprimer\r\n                    </button>\r\n                    <button\r\n                      className=\"modify-button\"\r\n                      onClick={() => openModifyModal(item.id)}\r\n                    >\r\n                      Modifier\r\n                    </button>\r\n                    <Link to={`/pilote/${item.id}`}>\r\n                      <button className=\"view-button\">Consulter</button>\r\n                    </Link>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <CreatePilotModal isOpen={isModalOpen} closeModal={closeModal} />\r\n      <ModifyPilotModal\r\n        isOpen={isModifyModalOpen}\r\n        closeModal={closeModifyModal}\r\n        piloteId={selectedPilotId}\r\n        refreshData={getData}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nexport default PilotsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}